/* ===========================
   PABLOBOT — Simplified Global Styles (Mobile-Optimized)
   =========================== */

/* --- Tokens --- */
:root {
  --bg:#fff; --panel:#f8f9fa; --ink:#1a1a1a; --muted:#6c757d;
  --brand:#0066ff; --accent:#0052cc;
  --line:#e0e0e0;
  --shadow-sm:0 1px 3px rgba(0,0,0,.08);
  --shadow-md:0 4px 12px rgba(0,102,255,.08);
  --max:1120px; --radius:8px; --space:clamp(14px,2.5vw,20px);
}

/* --- Base --- */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  background:var(--bg);color:var(--ink);
  font:500 16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
/* Smooth, consistent scrolling and text sizing on mobile */
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%;text-size-adjust:100%}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}
a:focus-visible,button:focus-visible{
  outline:2px solid var(--brand);outline-offset:2px;border-radius:4px;
}
.wrap{max-width:var(--max);margin:auto;padding:calc(var(--space)*0.9) var(--space)}

/* --- Accessibility --- */
.skip-link{
  position:absolute;top:-40px;left:0;z-index:100;
  background:var(--brand);color:#fff;padding:.5rem 1rem;
  text-decoration:none;transition:top .2s;
}
.skip-link:focus{top:0}

/* --- Typography --- */
h1,h2,h3{margin:0 0 .5em;font-weight:600;line-height:1.2;color:var(--ink)}
h1{font-size:clamp(24px,3.2vw,36px)}
h2{font-size:clamp(20px,2.4vw,28px)}
h3{font-size:clamp(18px,2vw,22px)}
p{margin:.5em 0 1em;line-height:1.6}
.muted{color:var(--muted);font-size:.95rem}

/* ===========================
   HEADER — Compact Top Bar
   =========================== */
header{
  position:sticky;top:0;z-index:10;
  background:rgba(255,255,255,.97);
  border-bottom:1px solid var(--line);
  box-shadow:var(--shadow-sm);
  padding:.4rem 0;
}
.brand{
  display:flex;align-items:center;justify-content:space-between;
  max-width:var(--max);margin:0 auto;padding:0 var(--space);
  gap:.6rem;
}
.brand__emoji{font-size:1.6rem;line-height:1}
.brand__block{display:flex;align-items:center;gap:.3rem;flex-wrap:wrap}
.brand__name{
  font-size:1.25rem;font-weight:700;margin:0;display:flex;align-items:baseline;gap:0;
}
.brand__letter{
  text-decoration:none;font-weight:800;color:var(--brand);
  transition:color .2s,transform .15s;
}
.brand__letter:hover{color:var(--accent);transform:translateY(-1px)}
.brand__tag{font-size:.85rem;color:var(--muted);margin-left:.5rem}

/* --- Nav --- */
nav.primary{margin-left:auto}
nav.primary ul{
  display:flex;gap:.5rem;list-style:none;margin:0;padding:0;flex-wrap:wrap;
}
nav.primary a,.nav-btn{
  display:inline-block;padding:.35rem .8rem;border-radius:6px;
  border:1px solid var(--line);background:var(--bg);
  font-size:.9rem;font-weight:500;color:var(--ink);
  transition:.2s;white-space:nowrap;
  min-block-size:40px; line-height:1.2; /* thumb-friendly */
  -webkit-tap-highlight-color: transparent;
}
nav.primary a:hover,.nav-btn:hover{
  background:var(--panel);border-color:var(--brand);text-decoration:none;
}
.nav-btn{
  color:var(--brand);border-color:var(--brand);background:rgba(0,102,255,.05);
}
.nav-btn:hover{
  background:var(--brand);color:#fff;box-shadow:0 3px 8px rgba(0,102,255,.25);
}

/* ===========================
   LAYOUT / CARDS / BUTTONS
   =========================== */
main{display:grid;gap:calc(var(--space)*1.25)}
.section{scroll-margin-top:64px}
.hr{height:1px;background:var(--line);margin:calc(var(--space)*1.5) 0}
.grid{display:grid;gap:var(--space)}
.grid--cards{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.two-col{display:grid;gap:var(--space)}
@media(min-width:900px){.two-col{grid-template-columns:1.2fr .8fr}}

.card{
  background:var(--bg);border:1px solid var(--line);border-radius:var(--radius);
  padding:1.25rem;box-shadow:var(--shadow-sm);
  transition:box-shadow .2s,transform .2s;
}
.card:hover{box-shadow:var(--shadow-md)}

.btn,.nav-btn{
  font-weight:600;cursor:pointer;text-align:center;border-radius:6px;
  transition:.2s;font-size:.95rem;
}
.btn{padding:.75rem 1.5rem;border:none}
.btn--brand{
  background:var(--brand);color:#fff;
}
.btn--brand:hover:not(:disabled){
  background:var(--accent);transform:translateY(-1px);
  box-shadow:0 4px 12px rgba(0,102,255,.25);
}

/* ===========================
   TABLES
   =========================== */
/* Scope: only touch .table-wrap and contained tables */
.table-wrap{
  position: relative;
  border:1px solid var(--line);
  border-radius:var(--radius);
  overflow-x:auto;             /* horizontal scroll if needed */
  overflow-y:visible;
  background:var(--bg);
  box-shadow:var(--shadow-sm);
  -webkit-overflow-scrolling:touch;
  scrollbar-gutter: stable both-edges; /* prevents layout shift when scrollbar shows */
}

/* Gentle edge fades that appear only when scrollable (toggled by JS) */
.table-wrap::before,
.table-wrap::after{
  content:"";
  position:absolute;
  inset-block:0;
  inline-size:18px;
  pointer-events:none;
  display:none;                /* JS flips to block via data attributes */
  background:linear-gradient(to right, var(--bg), transparent);
  z-index:3;
}
.table-wrap::after{
  inset-inline-start:auto;
  inset-inline-end:0;
  background:linear-gradient(to left, var(--bg), transparent);
}
.table-wrap[data-shadow-left="true"]::before{ display:block; }
.table-wrap[data-shadow-right="true"]::after{ display:block; }

/* Base table (kept similar to yours) */
.table-wrap table{
  width:100%;
  border-collapse:collapse;
  min-width:720px;             /* prevents cramped columns on mid widths */
}
.crypto-list{ display:grid; gap:10px; margin:10px 0 0; padding:0; list-style:none; }
.crypto-list li{ display:grid; gap:6px; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:var(--bg); }
.crypto-row{ display:flex; align-items:center; gap:8px; }
.crypto-row .emoji{ font-size:1.1rem; }
.crypto-meta{ display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:.95rem; }
.crypto-links{ display:flex; gap:10px; flex-wrap:wrap; }

/* Center titles for wallets list */
#wallets-list .crypto-row{ justify-content: center; }
#wallets-list .crypto-row strong{ display:inline-block; text-align:center; }
.table-wrap caption{
  caption-side:top;text-align:left;color:var(--muted);
  padding:.8rem 1rem;font-size:.9rem;
}
.table-wrap thead th{
  position:sticky; top:0; z-index:2;
  background:var(--panel);
  font-weight:600; padding:1rem; text-align:left;
  border-bottom:2px solid var(--line);
  text-transform:uppercase; letter-spacing:.5px; font-size:.9rem;
}
.table-wrap tbody td{
  padding:1rem;border-bottom:1px solid var(--line);vertical-align:middle;
}
.table-wrap tbody tr:hover{ background:rgba(0,102,255,.02) }
.table-wrap .cell-note{ color:var(--muted); font-size:.9rem; margin-top:.25rem }

/* Make links inside cells comfortable to tap */
.table-wrap a{
  display:inline-block;
  min-block-size:40px;                 /* near-44px without blowing up rows */
  line-height:1.1;
}

/* -----------------------------------------------------------
   Compact “CARD” MODE for phones (≤ 560px)
   Uses your existing data-label attributes on <td>
   No HTML changes required.
----------------------------------------------------------- */
@media (max-width: 560px){
  /* Remove horizontal scrolling by stacking rows vertically */
  .table-wrap{ overflow-x:visible; }
  /* Hide heavy tables, show mobile lists */
  .table-wrap table{ display:none; }
  .crypto-list{ display:grid; gap:8px; margin:8px 0 0; padding:0; list-style:none; }
  .crypto-list li{ display:grid; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:var(--bg); gap:6px; }
  .crypto-row{ display:flex; align-items:center; gap:8px; }
  .crypto-row .emoji{ font-size:1.1rem; }
  .crypto-meta{ display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:.9rem; }
  .crypto-links{ display:flex; gap:10px; flex-wrap:wrap; }
  .table-wrap::before,
  .table-wrap::after{ display:none !important; }

  .table-wrap table{
    min-width:0;
    width:100%;
    border-collapse:separate;
    border-spacing:0;
  }

  /* Hide header; we’ll print labels via td::before */
  .table-wrap thead,
  .table-wrap caption{ 
    position:absolute !important; 
    inline-size:1px; block-size:1px; overflow:hidden; clip-path:inset(50%);
    white-space:nowrap; 
  }

  /* Turn each row into a card */
  .table-wrap tbody tr{
    display:grid;
    grid-template-columns: 1fr;      /* one column stack */
    gap:.5rem;
    padding:0.75rem 0.9rem;
    margin:0.6rem 0;
    border:1px solid var(--line);
    border-radius:var(--radius);
    background:var(--bg);
    box-shadow:var(--shadow-sm);
  }
  .table-wrap tbody tr:hover{ background:var(--bg) } /* no hover color on mobile */

  /* Each cell becomes a labeled line: [Label]  Value */
  .table-wrap tbody td{
    display:grid;
    grid-template-columns: minmax(7rem, 40%) 1fr;
    align-items:start;
    gap:.75rem;
    padding:0;                        /* we already padded the card */
    border:none;
  }

  /* Use existing data-label as the key */
  .table-wrap tbody td::before{
    content: attr(data-label);
    font-weight:600;
    color: var(--text, #111);
    opacity:.8;
  }

  /* Tweak common columns */
  .table-wrap tbody td[data-label="#"]{
    order:-2;                         /* show first */
  }
  .table-wrap tbody td[data-label="Asset"]{
    order:-1;
  }

  /* Columns marked .hide-sm remain hidden as you already do */
  .table-wrap .hide-sm{ display:none !important; }

  /* Keep the “model” layout tidy inside the stacked cell */
  .table-wrap .model{
    display:flex; gap:.6rem; align-items:flex-start;
  }
  .table-wrap .emoji{ font-size:1.2rem; line-height:1; }

  /* Make action links fill width nicely if desired */
  .table-wrap td[data-label="Dexscreener"] a,
  .table-wrap td[data-label="Paper/Docs"] a,
  .table-wrap td[data-label="Explorer"] a{
    width:fit-content;
    padding:.5rem .75rem;
    border:1px solid var(--line);
    border-radius:8px;
  }
}


/* ===========================
   SEARCHBAR (Centered)
   =========================== */
.searchbar{
  display:flex;justify-content:center;align-items:center;
  flex-wrap:wrap;gap:.6rem;margin:1rem auto 1.2rem;text-align:center;
  max-width:600px;
}
.searchbar input{
  flex:1 1 280px;max-width:360px;padding:.6rem .9rem;
  border:1px solid var(--line);border-radius:6px;font-size:.95rem;
  background:var(--bg);color:var(--ink);
  transition:border-color .2s,box-shadow .2s;
}
.searchbar input:focus{
  outline:none;border-color:var(--brand);
  box-shadow:0 0 0 2px rgba(0,102,255,.1);
}
.kb{font-size:.85rem;color:var(--muted)}

/* Removed older 'searchbar-mini' block in favor of unified compact search at end */


/* ===========================
   TABS (Cryptorka)
   =========================== */
.tabs{
  display:inline-flex;flex-wrap:wrap;gap:8px;margin:.25rem 0 .75rem;
}
.tab{
  border:1px solid var(--line);border-radius:999px;
  background:var(--bg);color:var(--ink);
  padding:.5rem 1rem;font-weight:600;cursor:pointer;
  transition:background .2s,border-color .2s,transform .15s;
}
.tab:hover{background:var(--panel)}
.tab.is-active,.tab[aria-selected="true"]{
  background:rgba(0,102,255,.06);border-color:var(--brand);
}
[role="tabpanel"][hidden]{display:none!important}

/* ===========================
   FOOTER
   =========================== */
footer{border-top:1px solid var(--line);padding-top:2rem;margin-top:3rem}
.foot-note{font-size:.9rem;color:var(--muted)}

/* ===========================
   FLOATING BUTTONS
   =========================== */
.fab,.top-link{
  position:fixed;right:20px;border-radius:50%;
  background:var(--brand);color:#fff;border:none;
  cursor:pointer;box-shadow:0 4px 12px rgba(0,102,255,.3);
  transition:transform .2s,box-shadow .2s;
}
.fab{bottom:80px;width:56px;height:56px;font-size:1.5rem}
.top-link{bottom:20px;padding:.7rem .9rem;font-size:1.2rem}
.fab:hover,.top-link:hover{transform:translateY(-2px);text-decoration:none}

/* ===========================
   RESPONSIVE TWEAKS
   =========================== */
@media(max-width:768px){
  .brand{flex-wrap:wrap;justify-content:center;text-align:center}
  nav.primary{width:100%;justify-content:center;margin-top:.3rem}
  nav.primary ul{
    flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;
    scrollbar-width:none;padding-bottom:.3rem;
  }
  nav.primary ul::-webkit-scrollbar{display:none}
  nav.primary a,.nav-btn{
    flex:0 0 auto;font-size:.9rem;padding:.4rem .8rem;
  }
  .searchbar{flex-direction:column;align-items:stretch;gap:8px}
  .searchbar input{min-width:100%}
  .fab{bottom:70px;width:48px;height:48px;font-size:1.3rem}
  .top-link{bottom:16px;right:16px}
  body{font-size:15px;line-height:1.45}
}

/* Compact search on small devices (mobile-first) */
@media (max-width: 520px) {
  .searchbar { gap: 6px; margin: .5rem auto .75rem; }
  #cryptoSearch { padding: .5rem .75rem; font-size: .9rem; max-width: 100%; }
  #cryptoSearch::placeholder { opacity: .7; font-size: .9em; }
  #cryptoSearchHint, .searchbar .kb { font-size: .8rem; line-height: 1.3; }
}

/* Ultra-narrow phones: slightly tighter */
@media (max-width: 360px) {
  .searchbar { gap: 4px; margin: .4rem auto .6rem; }
  #cryptoSearch { padding: .45rem .65rem; font-size: .85rem; }
  #cryptoSearchHint, .searchbar .kb { font-size: .75rem; }
}

/* ===========================
   Search Focus Polish
   - Make focus visually clear without layout shift
   - Scope strictly to .searchbar and its input/hint
   =========================== */

/* Highlight the whole searchbar when the input is focused */
.searchbar:focus-within {
  border-color: #2563eb; /* brand-ish blue */
  box-shadow: 0 0 0 3px rgba(37,99,235,0.12);
}

/* Smooth focus transition on the input */
.searchbar #cryptoSearch {
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  -webkit-appearance: none;
  appearance: none;
  background-clip: padding-box;
}

/* Stronger, consistent input focus without jumping */
.searchbar #cryptoSearch:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
}

/* Hint remains subtle and doesn’t reflow on focus */
.searchbar #cryptoSearchHint {
  transition: color .15s ease, opacity .15s ease;
}
.searchbar:focus-within #cryptoSearchHint {
  color: var(--muted);
  opacity: .9;
}

/* Backdrop */
.modal-backdrop{
  position: fixed;
  inset: 0;
  z-index: 999;
  background: rgba(0,0,0,.5);
  backdrop-filter: blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
}
.modal-backdrop[data-open="true"]{
  opacity: 1;
  pointer-events: auto;
}

/* Modal wrapper: iOS-safe centering */
.modal{
  position: fixed;
  inset: 0;
  z-index: 1000;
  display: none;                /* hidden by default */
  padding: 16px;                /* breathing room on tiny screens */
  /* grid centering is the most reliable on iOS */
  display: grid;
  place-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
  -webkit-transform: translateZ(0);  /* iOS paint fix */
  transform: translateZ(0);
}

/* visible state */
.modal[aria-hidden="false"]{
  opacity: 1;
  pointer-events: auto;
}

/* iOS viewport quirk fix */
@supports (-webkit-touch-callout: none) {
  .modal{
    min-height: 100dvh;         /* dynamic viewport height on iOS */
  }
}

/* Panel */
.modal__panel{
  position: relative;
  width: min(92vw, 520px);
  margin: 0;
  background: var(--bg);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: 0 20px 60px rgba(0,0,0,.15);
  overflow: hidden;
  /* Avoid bottom-left “teleport” on open in Mobile Safari */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.modal__row{
  display:flex; gap:.6rem; align-items:stretch;
  margin-top:.5rem; margin-bottom:0;
}
.modal__row input{
  flex:1; min-width:0;
  height:44px;                        /* match button */
  padding:0 .9rem;                    /* vertical centered text */
}
.modal__row .btn{
  height:44px;                        /* match input */
  padding:0 1.1rem;                   /* consistent hit area */
  white-space:nowrap;
}

/* Small screens: stack neatly */
@media (max-width:480px){
  .modal__row{ flex-direction:column; }
  .modal__row .btn{ width:100%; }
}

.modal{
  position:fixed; inset:0; z-index:1000;
  display:none; align-items:center; justify-content:center;
  padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom); /* viewport padding */
}
.modal[aria-hidden="false"]{ display:flex; opacity:1 }
.modal__panel{
  width:100%; max-width:480px;
  margin:0;                           /* no stray margins */
}

/* ===========================
   Newsletter Modal — Final Polish
   =========================== */

/* Backdrop */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
  z-index: 999; /* sits below the panel */
}
.modal-backdrop[data-open="true"] {
  opacity: 1;
  pointer-events: auto;
}

/* Modal container centers the panel */
.modal {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom);
  z-index: 1000; /* above backdrop */
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
}
.modal[aria-hidden="false"] {
  opacity: 1;
  pointer-events: auto;
}

/* Panel */
.modal__panel {
  position: relative;
  width: min(560px, 92vw);
  background: var(--bg);
  border: 1px solid var(--line);
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,.18);
  padding: 16px 16px 18px;
  transform: translateY(6px);
  animation: modal-pop .18s ease forwards;
}
@keyframes modal-pop { to { transform: translateY(0); } }

/* Header */
.modal__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}
.modal__head h3 {
  margin: 0;
  font-size: clamp(18px, 2.2vw, 22px);
}

/* Close button – top-right, larger hit-area */
.modal__close {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 36px;
  height: 36px;
  line-height: 1;              /* fix the misaligned “X” */
  display: grid;
  place-items: center;
  border-radius: 8px;
  border: 1px solid var(--line);
  background: var(--bg);
  color: var(--ink);
  cursor: pointer;
  box-shadow: var(--shadow-sm);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.modal__close:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
.modal__close:active { transform: translateY(0); }

/* Body & form */
.modal__body .note { margin: 4px 0 12px; }

.modal__row {
  display: flex;
  align-items: stretch;
  gap: 10px;
}

#nl-email {
  flex: 1 1 auto;
  min-width: 0;
  padding: .75rem .9rem;
  border: 1px solid var(--line);
  border-radius: 8px;
  font-size: .95rem;
  background: var(--bg);
  color: var(--ink);
  transition: border-color .15s ease, box-shadow .15s ease;
}
#nl-email:focus {
  outline: none;
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(0,102,255,.12);
}

#nl-form .btn.btn--brand {
  padding: .8rem 1.1rem;
  border-radius: 8px;
  white-space: nowrap;
}

/* Feedback message states */
#nl-feedback.note.success { color: #18794e; }
#nl-feedback.note.error   { color: #b42318; }

/* Mobile layout */
@media (max-width: 520px) {
  .modal__panel { padding: 14px; border-radius: 12px; }
  .modal__row { flex-direction: column; gap: 8px; }
  #nl-form .btn.btn--brand { width: 100%; }
  .modal__close {
    top: 8px; right: 8px; width: 40px; height: 40px; /* bigger touch target */
  }
}

/* ===========================
   MOBILE ENHANCEMENTS
   - Intrinsic media and code blocks
   - Tap-friendly controls
   - Subtle scroll hints for wide tables
   =========================== */

/* Media should never overflow viewport on small devices */
img, video, svg, canvas, iframe { max-inline-size: 100%; block-size: auto; display: block; height: auto; }

/* Code blocks: horizontally scrollable with pleasant padding */
pre { max-inline-size: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; padding: .9rem; margin: 1rem 0; border: 1px solid var(--line); border-radius: 8px; background: #fafafa; }
pre code { white-space: pre; word-break: normal; }
code { overflow-wrap: anywhere; }

/* Ensure interactive controls meet recommended 44px target */
button, .btn, [role="button"], a.btn, nav.primary a, .nav-btn { min-block-size: 44px; }
a { touch-action: manipulation; }

/* Scroll hint gradients for horizontally scrollable tables */
.table-wrap { position: relative; }
.table-wrap::before, .table-wrap::after { content: ""; position: absolute; inset-block: 0; width: 16px; pointer-events: none; opacity: 0; transition: opacity .16s ease; z-index: 3; }
.table-wrap::before { left: 0; background: linear-gradient(to right, rgba(0,0,0,.08), transparent 70%); border-start-start-radius: var(--radius); border-end-start-radius: var(--radius); }
.table-wrap::after { right: 0; background: linear-gradient(to left, rgba(0,0,0,.08), transparent 70%); border-start-end-radius: var(--radius); border-end-end-radius: var(--radius); }
.table-wrap.is-scrollable:not(.at-start)::before { opacity: 1; }
.table-wrap.is-scrollable:not(.at-end)::after { opacity: 1; }

/* Helper class used by JS to boost too-small hit areas */
.hit-boost { min-block-size: 44px; }

/* Hide optional cells on very small screens */
@media (max-width: 640px) {
  .table-wrap .hide-sm { display: none; }
}

/* Tighten wallet table on phones: prevent overflow and wrap content */
@media (max-width: 640px) {
  .table-wrap table { min-width: 0; }
  .table-wrap td { word-break: break-word; overflow-wrap: anywhere; }
  .table-wrap td > * { min-width: 0; }
  .table-wrap td .model { display: flex; gap: .5rem; align-items: flex-start; }
}

/* ===========================
   MOBILE OVERHAUL (merged)
   - Single-column container, compact controls, robust tables
   - Added at end to safely override earlier rules where needed
   =========================== */

/* Root container: keep content centered with safe padding */
main.wrap { max-inline-size: 720px; margin-inline: auto; padding-inline: 12px; }

/* Compact, flexible search row; hint wraps */
.searchbar { position: relative; display: flex; flex-wrap: wrap; align-items: center; gap: 8px; margin-block: 8px 12px; }
#cryptoSearch, #llmSearch {
  flex: 1 1 16rem; inline-size: 100%; min-block-size: 40px;
  padding-block: 8px; padding-inline: 12px 40px; /* room for clear (×) */
  font-size: clamp(.9rem, 2.6vw, .95rem); line-height: 1.2;
  border: 1px solid rgba(0,0,0,0.15); border-radius: 10px; background: #fff;
  outline: none; max-inline-size: 100%; box-sizing: border-box;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  -webkit-appearance: none; appearance: none; background-clip: padding-box;
}
.searchbar:focus-within { box-shadow: 0 0 0 3px rgba(37,99,235,0.12); }
#cryptoSearch:focus, #llmSearch:focus { border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37,99,235,0.15); }
#cryptoSearch::placeholder, #llmSearch::placeholder { color: rgba(0,0,0,0.45); opacity: .9; }
#cryptoSearchHint, .searchbar .kb { flex: 1 1 100%; margin-block-start: 2px; font-size: clamp(.78rem, 2.2vw, .85rem); line-height: 1.3; color: rgba(0,0,0,0.55); }
@media (max-width: 360px) {
  .searchbar { gap: 6px; margin-block: 6px 10px; }
  #cryptoSearch, #llmSearch { min-block-size: 38px; padding-inline: 10px 38px; font-size: .9rem; }
  #cryptoSearchHint, .searchbar .kb { font-size: .78rem; }
}

/* Tabs: horizontally scrollable on small screens */
.tabs { display: inline-flex; gap: 8px; max-inline-size: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; scrollbar-gutter: stable; padding-block: 2px; }
.tab { flex: 0 0 auto; min-block-size: 40px; padding-inline: 12px; border-radius: 999px; white-space: nowrap; }

/* Edge fades via data attributes (JS toggles) */
.table-wrap[data-shadow-left="true"]::before { opacity: 1; }
.table-wrap[data-shadow-right="true"]::after { opacity: 1; }

/* Wide tables keep min-width; sticky header preserved by existing rules */
.table-wrap > table { min-width: 720px; }

/* Phone card mode (≤560px): stacked rows with labels */
@media (max-width: 560px) {
  .table-wrap { overflow: visible; }
  .table-wrap > table { min-width: 0; width: 100%; }
  .table-wrap caption, .table-wrap thead { position: absolute !important; inline-size: 1px; block-size: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0; }
  .table-wrap tbody tr { display: block; padding: 12px; margin-block: 10px; border: 1px solid rgba(0,0,0,0.08); border-radius: 12px; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
  .table-wrap tbody td { display: grid; grid-template-columns: 42% 1fr; gap: 8px; padding: 6px 0; border: 0; word-break: break-word; overflow-wrap: anywhere; }
  .table-wrap tbody td::before { content: attr(data-label); font-weight: 600; color: rgba(0,0,0,0.55); text-align: left; }
  .hide-sm { display: none !important; }
  .table-wrap a { display: inline-block; min-block-size: 40px; padding: 6px 10px; border: 1px solid rgba(0,0,0,0.12); border-radius: 10px; text-decoration: none; }
  .model { display: flex; gap: 8px; align-items: flex-start; min-width: 0; }
  .model > * { min-width: 0; }
  .cell-note { color: rgba(0,0,0,0.55); }
}

/* ===========================
   Mobile-first container + compact search (final overrides)
   =========================== */
@media (max-width: 560px) {
  /* Reinforce single-column container with safe padding */
  main.wrap { max-inline-size: 720px; margin-inline: auto; padding-inline: 12px; }

  /* Slim search wrapper; remove card-like padding/border if any earlier */
  .searchbar { padding: 0; border: 0; background: transparent; box-shadow: none; }

  /* Compact input height (~32px) and tighter padding */
  .searchbar #cryptoSearch, .searchbar #llmSearch { min-block-size: 32px; padding-block: 6px; padding-inline: 10px 34px; font-size: .9rem; }

  /* Hint small and tidy */
  #cryptoSearchHint, .searchbar .kb { font-size: .78rem; }
}

/* Consolidation: older searchbar variants removed; unified compact search lives later in file */

/* Make the input fluid and tap-friendly */
.searchbar #cryptoSearch {
  flex: 1 1 16rem;                 /* grows to fill, shrinks if needed */
  inline-size: 100%;
  min-block-size: 44px;            /* touch target */
  padding-inline: 0.875rem 2.5rem; /* leave room on the right for clear btn */
  padding-block: 0.5rem;

  font-size: clamp(0.95rem, 2.6vw, 1rem);
  line-height: 1.3;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 0.6rem;
  outline: none;
  background: #fff;

  /* Prevent horizontal overflow on tiny devices */
  max-inline-size: 100%;
  box-sizing: border-box;
}

/* Focus styles: visible but not shouting */
.searchbar #cryptoSearch:focus {
  border-color: #2563eb;                 /* blue-ish */
  box-shadow: 0 0 0 3px rgba(37,99,235,0.15);
}

/* Placeholder legibility */
.searchbar #cryptoSearch::placeholder {
  color: rgba(0,0,0,0.45);
}

/* iOS/Chromium search cancel button won’t always be present—hide only if our custom clear shows */
.searchbar #cryptoSearch.has-custom-clear::-webkit-search-cancel-button {
  -webkit-appearance: none;
  appearance: none;
}

/* The hint sits under the input on narrow screens due to flex-wrap */
.searchbar .kb,
.searchbar #cryptoSearchHint {
  flex: 1 1 100%;                  /* wrap to new line when needed */
  margin-block-start: 0.25rem;
  font-size: clamp(0.78rem, 2.2vw, 0.85rem);
  color: rgba(0,0,0,0.55);
}

/* Optional subtle keyboard/metadata styling */
.searchbar .kb::before {
  content: "ℹ︎ ";
  opacity: 0.65;
}

/* Clear button injected by JS: positioned inside the input area */
.searchbar .search-clear {
  position: relative;              /* for stacking context */
}

.searchbar .search-clear-btn {
  position: absolute;
  inset-block-start: 50%;
  inset-inline-end: 1rem;
  transform: translateY(-50%);

  display: none;                   /* shown via JS when there’s value */
  justify-content: center;
  align-items: center;

  min-inline-size: 44px;           /* touch target */
  min-block-size: 44px;
  border: none;
  border-radius: 0.5rem;
  background: transparent;
  cursor: pointer;

  /* Accessible visual affordance on focus */
  outline: none;
}

.searchbar .search-clear-btn:focus-visible {
  box-shadow: 0 0 0 3px rgba(37,99,235,0.25);
}

/* Button glyph (×) style via data attribute for simplicity */
.searchbar .search-clear-btn::before {
  content: attr(aria-label);       /* default for screen readers if text used */
  position: absolute;
  inline-size: 1px;
  block-size: 1px;
  overflow: hidden;
  clip-path: inset(50%);
}

/* Visual icon using pure CSS (no external assets) */
.searchbar .search-clear-btn::after {
  content: "×";
  font-size: 1.25rem;
  line-height: 1;
  opacity: 0.65;
}

.searchbar .search-clear-btn:hover::after {
  opacity: 0.9;
}

/* When JS shows the button */
.searchbar .search-clear-btn.is-visible {
  display: inline-flex;
}

/* Ultra-narrow screens: gently reduce paddings to avoid crowding */
@media (max-width: 360px) {
  .searchbar {
    padding: 0.5rem 0.75rem;
  }
  .searchbar #cryptoSearch {
    padding-inline: 0.75rem 2.25rem;
  }
}

/* === searchbar-tiny.css — hard overrides for a compact search === */

/* Container: no card chrome; tiny, inline feel */
.searchbar{
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;

  border: 0 !important;
  background: transparent !important;
  box-shadow: none !important;

  /* keep it narrow even on wide screens */
  max-inline-size: 420px !important;
  inline-size: 100%;
  margin-inline: auto !important;
  text-align: center !important;

  height: 55px !important;  /* compact height */
  padding: 0 !important;    /* no extra padding */
  margin-block: 8px 12px !important;
}

/* Input: clamp to a small height everywhere */
#cryptoSearch{
  -webkit-appearance: none;
  appearance: none;

  flex: 1 1 160px;
  inline-size: 100%;
  max-inline-size: 360px;

  height: 32px !important;
  min-height: 32px !important;
  line-height: 30px !important;   /* centers text without extra height */
  padding: 0 .625rem !important;   /* tight padding */

  font-size: .9rem !important;
  border: 1px solid rgba(0,0,0,.18) !important;
  border-radius: 6px !important;
  background: #fff !important;
  color: inherit;

  outline: none;
  box-sizing: border-box;
  transition: border-color .15s ease, box-shadow .15s ease;
  height: 15px !important;
}
#cryptoSearch:focus{
  border-color:#2563eb !important;
  box-shadow:0 0 0 2px rgba(37,99,235,.15) !important;
}
#cryptoSearch::placeholder{ color: rgba(0,0,0,.45) }

/* Final overrides: ensure compact, consistent search wins over legacy !important rules */
.searchbar #cryptoSearch, .searchbar #llmSearch {
  min-height: 32px !important;
  height: auto !important;
  line-height: normal !important;
  padding: 6px 34px 6px 10px !important;
  font-size: .9rem !important;
}

/* Accessibility: clear focus for tabs */
.tab:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }

/* Media/code containment on small screens */
img, video, svg, canvas, iframe { max-inline-size: 100%; block-size: auto; height: auto; display: block; }
pre { max-inline-size: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
code { overflow-wrap: anywhere; }

/* ===========================
   Collapse (Papers & References)
   - Make the toggle button compact, accessible, and reliable
   =========================== */
.collapse { margin-block: 8px 12px; }
.collapse__head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  inline-size: 100%;
  text-align: left;
  padding: 10px 12px;
  min-block-size: 40px;
  border: 1px solid var(--line);
  background: var(--bg);
  color: var(--ink);
  border-radius: 10px;
  cursor: pointer;
}
.collapse__head:hover { background: var(--panel); border-color: var(--brand); }
.collapse__head:focus-visible { outline: 2px solid var(--brand); outline-offset: 2px; }
/* Caret indicator */
.collapse__head::after {
  content: '▾';
  margin-inline-start: auto;
  opacity: .7;
  transition: transform .18s ease;
}
.collapse[data-open="true"] .collapse__head::after { transform: rotate(180deg); }
/* Body visibility controlled by wrapper state */
.collapse__body { padding: 10px 0; }
.collapse[data-open="false"] .collapse__body { display: none; }

/* (removed) PROMPT CAROUSEL styles */

/* ===========================
   Footer
   =========================== */
.site-footer{ border-top:1px solid var(--line); padding-block:16px 20px; }
.site-footer .footer ul{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; list-style:none; padding:0; margin:0 0 8px; }
.site-footer .footer a{
  display:inline-block; padding:8px 12px; min-block-size:40px;
  border:1px solid var(--line); border-radius:8px; background:var(--bg);
  color:var(--ink); text-decoration:none; transition:.2s;
}
.site-footer .footer a:hover{ background:var(--panel); border-color:var(--brand); text-decoration:none; }
.site-footer .foot-note{ text-align:center; color:var(--muted); font-size:.9rem; margin:6px 0 0; }

/* ===========================
   PG: Prompt Gallery (namespaced)
   =========================== */
#pg-section { margin-block: 10px 16px; }
.pg-controls { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; margin-block: 8px 12px; }
.pg-input, .pg-select { appearance: none; -webkit-appearance: none; border: 1px solid var(--line, #e5e7eb); background: var(--bg, #fff); color: var(--ink, #111827); border-radius: 8px; padding: 10px 12px; font-size: 0.95rem; min-inline-size: 220px; }
.pg-input { flex: 1 1 200px; min-inline-size: 260px; }
.pg-btn { padding: 10px 14px; border-radius: 8px; border: 1px solid var(--line, #e5e7eb); background: var(--panel, #f9fafb); color: var(--ink, #111827); cursor: pointer; }
.pg-btn:hover { background: var(--bg, #fff); border-color: var(--brand, #2563eb); }
.pg-status { color: var(--muted, #6b7280); font-size: .95rem; margin: 2px 0 10px; }

.pg-grid { display: grid; gap: 14px; grid-template-columns: 1fr; }
@media (min-width: 700px) { .pg-grid { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 1024px) { .pg-grid { grid-template-columns: repeat(3, 1fr); } }

.pg-card { background: var(--bg, #fff); border: 1px solid var(--line, #e5e7eb); border-radius: 10px; padding: 14px; box-shadow: 0 1px 2px rgba(0,0,0,.04), 0 2px 8px rgba(0,0,0,.03); display: grid; gap: 10px; transition: box-shadow .18s ease, transform .18s ease; }
.pg-card:hover { transform: translateY(-1px); box-shadow: 0 2px 6px rgba(0,0,0,.06), 0 6px 18px rgba(0,0,0,.05); }
@media (prefers-reduced-motion: reduce){
  .pg-card:hover{ transform:none }
}
.pg-badges { display: flex; flex-wrap: wrap; gap: 6px; }
.pg-badge { display: inline-block; font-size: .75rem; padding: 3px 8px; border-radius: 999px; border: 1px solid var(--line, #e5e7eb); background: var(--panel, #f9fafb); color: var(--ink, #111827); }
.pg-title { font-size: 1.05rem; line-height: 1.25; margin: 1px 0; display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden; }
.pg-subject { color: var(--ink, #111827); font-size: .95rem; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.pg-pre { background: #0f172a; color: #e2e8f0; padding: 10px; border-radius: 8px; overflow: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-size: .85rem; line-height:1.35; border:1px solid rgba(255,255,255,.06); }
.pg-meta { display: flex; flex-wrap: wrap; gap: 8px; color: var(--muted, #6b7280); font-size: .85rem; }
.pg-meta b { color: var(--ink, #111827); font-weight: 600; }
.pg-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.pg-action { cursor: pointer; padding: 10px 12px; min-block-size:40px; border-radius: 8px; border: 1px solid var(--line, #e5e7eb); background: var(--bg, #fff); color: var(--ink, #111827); font-weight: 600; font-size: .9rem; }
.pg-action:hover { border-color: var(--brand, #2563eb); background: var(--panel, #f9fafb); }

.pg-ctas { display: flex; gap: 10px; margin-block: 12px 6px; flex-wrap: wrap; }
.pg-cta { display: inline-block; text-align: center; padding: 12px 16px; border-radius: 10px; text-decoration: none; font-weight: 700; flex: 1 1 180px; }
.pg-cta--primary { background: var(--brand, #2563eb); color: #fff; }
.pg-cta--secondary { background: var(--panel, #f3f4f6); color: var(--ink, #111827); border: 1px solid var(--line, #e5e7eb); }
.pg-cta--primary:hover { background: var(--accent, #1d4ed8); }
.pg-cta--secondary:hover { background: #fff; }
/* Improve CTA tap targets and stacking on narrow screens */
.pg-cta { min-block-size: 44px; }
.pg-ctas { align-items: stretch; }
@media (max-width: 420px){
  .pg-ctas { flex-direction: column; }
  .pg-cta { width: 100%; flex: 1 1 auto; }
}

/* Shorten subscribe CTA label on ultra-small screens */
.pg-label-short { display: none; }
@media (max-width: 360px){
  .pg-label-full { display: none; }
  .pg-label-short { display: inline; }
}

.pg-sticky { position: fixed; inset-inline: 0; bottom: 0; z-index: 60; display: grid; grid-template-columns: 1fr 1fr; gap: 8px; padding: 10px env(safe-area-inset-right, 10px) calc(10px + env(safe-area-inset-bottom, 0)); background: rgba(255,255,255,.96); border-top: 1px solid var(--line, #e5e7eb); backdrop-filter: saturate(120%) blur(6px); transition: transform .2s ease; will-change: transform; }
.pg-sticky.pg-sticky--hidden { transform: translateY(110%); }
.pg-sticky-btn { display: inline-block; text-align: center; padding: 12px 14px; border-radius: 10px; text-decoration: none; font-weight: 700; font-size: 1rem; }
.pg-sticky-btn--primary { background: var(--brand, #2563eb); color: #fff; }
.pg-sticky-btn--secondary { background: var(--panel, #f3f4f6); color: var(--ink, #111827); border: 1px solid var(--line, #e5e7eb); }
.pg-sticky-btn--primary:hover { background: var(--accent, #1d4ed8); }
.pg-sticky-btn--secondary:hover { background: #fff; }
.pg-sticky-spacer { block-size: 70px; }

/* a11y focus */
.pg-input:focus, .pg-select:focus, .pg-btn:focus, .pg-action:focus, .pg-cta:focus, .pg-sticky-btn:focus { outline: 2px solid var(--brand, #2563eb); outline-offset: 2px; }

/* Toast: appears above sticky bar on phones */
.pg-toast { position: fixed; left: 50%; bottom: calc(16px + env(safe-area-inset-bottom, 0)); transform: translate(-50%, 120%); z-index: 70; background: rgba(17,24,39,.96); color: #fff; padding: 10px 14px; border-radius: 10px; font-weight: 600; box-shadow: 0 6px 18px rgba(0,0,0,.25); transition: transform .2s ease, opacity .2s ease; opacity: 0; pointer-events: none; }
.pg-toast.pg-toast--show { transform: translate(-50%, 0); opacity: 1; }

/* Very small phones: bump base font slightly for legibility */
@media (max-width: 360px){ body { font-size: 17px; } }

/* --- Enhancements: header, chips, collapsible preview, accents --- */
.pg-header{ display:flex; align-items:center; justify-content:flex-start; gap:8px; }
.pg-head-left{ display:flex; align-items:center; gap:8px; min-inline-size:0; }
.pg-emoji{ font-size:1.15rem; line-height:1; }
.pg-head-right{ display:flex; align-items:center; gap:6px; }
.pg-chip{ display:inline-block; font-size:.75rem; padding:3px 8px; border-radius:999px; border:1px solid var(--line,#e5e7eb); background: var(--panel,#f3f4f6); color: var(--ink,#111827); font-variant-numeric: tabular-nums; }
.pg-chip--score{ background:#fff8eb; border-color:#ffe2b5; }
.pg-chip--rank{ background:#eef2ff; border-color:#c7d2fe; display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; padding:0; border-radius:50%; font-weight:700; }

.pg-prompt{ display:grid; gap:8px; }
.pg-toggle{ appearance:none; -webkit-appearance:none; border:1px solid var(--line,#e5e7eb); background:var(--bg,#fff); color:var(--ink,#111827); padding:8px 10px; border-radius:8px; font-weight:600; font-size:.9rem; cursor:pointer; width:max-content; }
.pg-toggle:hover{ background:var(--panel,#f3f4f6); border-color:var(--brand,#2563eb); }

/* Collapsed state uses gradient fade */
.pg-prompt[data-open="false"] .pg-pre{ position:relative; max-height:8.5em; overflow:hidden; }
.pg-prompt[data-open="false"] .pg-pre::after{ content:""; position:absolute; inset-inline:0; bottom:0; height:2.75em; background:linear-gradient(180deg, rgba(15,23,42,0), #0f172a); }

/* Micro-feedback */
.pg-pre--flash{ outline:2px solid #16a34a; box-shadow:0 0 0 2px rgba(22,163,74,.18); }
.pg-action.pg-ok{ background:#ecfdf5; border-color:#a7f3d0; color:#065f46; }

/* Category accents on badges */
.pg-card[data-pg-cat="learning"] .pg-badge{ background:#e7f0ff; border-color:#c7dbff; }
.pg-card[data-pg-cat="brainstorming"] .pg-badge{ background:#fff7e6; border-color:#ffe8b3; }
.pg-card[data-pg-cat="creativity"] .pg-badge{ background:#f3e8ff; border-color:#e9d5ff; }
.pg-card[data-pg-cat="education"] .pg-badge{ background:#e6fffb; border-color:#b2f5ea; }

@media (min-width: 700px){
  .pg-title{-webkit-line-clamp:2}
}
.card--compact .list { display: grid; gap: 6px; margin: 0; padding-left: 1.1rem; }
.card--compact .list li { margin: 0; line-height: 1.25; }
.card--compact a { line-height: 1.25; }
